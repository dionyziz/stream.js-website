<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../assets/style.css?t=615badd5">
    <script src="../assets/script.js?t=42463e55"></script>
    <title>Beyond Infinity - stream.js</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1"><a class="link title  link-index" href="../index.html">stream.js</a>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title  link-getting_started" href="../getting_started/index.html">Getting Started</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-getting_startedfirst_stream" href="../getting_started/First_Stream.html">First Stream</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-getting_startedmore_goodies" href="../getting_started/More_Goodies.html">More Goodies</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-getting_startedbeyond_infinity" href="../getting_started/Beyond_Infinity.html#">Beyond Infinity</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">API Reference</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-apiconstructor" href="../API/Constructor.html#">Constructor</a>
                </li>
                <li class="menu-item -level-2 -parent"><a class="link title  link-apiinstance" href="../API/Instance.html#">Instance Methods</a>
                  <ul class="submenu">
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-2" href="../API/Instance.html#add">add()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-3" href="../API/Instance.html#append">append()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-4" href="../API/Instance.html#concatmap">concatmap()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-5" href="../API/Instance.html#drop">drop()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-6" href="../API/Instance.html#dropwhile">dropWhile()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-7" href="../API/Instance.html#empty">empty()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-8" href="../API/Instance.html#filter">filter()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-9" href="../API/Instance.html#force">force()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-10" href="../API/Instance.html#head">head()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-11" href="../API/Instance.html#item">item()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-12" href="../API/Instance.html#length">length()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-13" href="../API/Instance.html#map">map()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-14" href="../API/Instance.html#member">member()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-15" href="../API/Instance.html#print">print()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-16" href="../API/Instance.html#reduce">reduce()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-17" href="../API/Instance.html#scale">scale()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-18" href="../API/Instance.html#sum">sum()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-19" href="../API/Instance.html#tail">tail()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-20" href="../API/Instance.html#take">take()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-21" href="../API/Instance.html#takewhile">takeWhile()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-22" href="../API/Instance.html#walk">walk()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apiinstance-23" href="../API/Instance.html#zip">zip()</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent">
              <ul class="submenu">
                <li class="menu-item -level-2 -parent"><a class="link title  link-apistatic" href="../API/Static.html">Static Methods</a>
                  <ul class="submenu">
                    <li class="menu-item -level-3"><a class="link title  link-apistatic-2" href="../API/Static.html#cycle">cycle()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apistatic-3" href="../API/Static.html#equals">equals()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apistatic-4" href="../API/Static.html#fromarray">fromArray()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apistatic-5" href="../API/Static.html#iterate">iterate()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apistatic-6" href="../API/Static.html#make">make()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apistatic-7" href="../API/Static.html#makenaturalnumbers">makeNaturalNumbers()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apistatic-8" href="../API/Static.html#makeones">makeOnes()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apistatic-9" href="../API/Static.html#range">range()</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-apistatic-10" href="../API/Static.html#repeat">repeat()</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title  link-ports" href="../Ports.html">Ports</a>
              <ul class="submenu">
                <li class="menu-item -level-2">
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title  link-tribute" href="../Tribute.html">Tribute</a>
              <ul class="submenu">
                <li class="menu-item -level-2">
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </div>
      <div class="body page-getting_startedbeyond_infinity">
        <div class="header-nav">
          <div class="right"><a class="iconlink" href="https://github.com/dionyziz/stream.js" data-title="dionyziz/stream.js">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="beyond-infinity">Beyond Infinity</h1>
<p>Let&apos;s now start playing with infinity. Streams don&apos;t need to have a finite number of elements. For example, you can omit the second argument to <code>Stream.range(low, high)</code> and write <code>Stream.range(low)</code>; in that case, there is no upper bound, and so the stream contains all the natural numbers from low and up. You can also omit <code>low</code> and it defaults to <code>1</code>. In that case <code>Stream.range()</code> returns the stream of natural numbers.</p>
<h2 id="does-that-require-infinite-memorytimeprocessing-power">Does that require infinite memory/time/processing power?</h2>
<p>No, it doesn&apos;t. That&apos;s the awesome part. You can run these things and they work really fast, like regular arrays. Here&apos;s an example that prints the numbers from <code>1</code> to <code>10</code>:</p>
<pre><code class="lang-js"><span class="pl-k">var</span> naturalNumbers = Stream.range(); <span class="pl-c">// returns the stream containing all natural numbers from 1 and up</span>
<span class="pl-k">var</span> oneToTen = naturalNumbers.take(<span class="hljs-number">10</span>); <span class="pl-c">// returns the stream containing the numbers 1...10</span>
oneToTen.print();
</code></pre>
<h2 id="you-are-cheating!">You are cheating!</h2>
<p>Yes, I am. The point is that you can think of these structures as infinite, and this introduces a new programming paradigm that yields concise code that is easy to understand and closer to mathematics than usual imperative programming. The library itself is very short; it&apos;s thinking about these concepts that matters. Let&apos;s play with this a little more and construct the streams containing all even numbers and all odd numbers respectively.</p>
<pre><code class="lang-js"><span class="pl-k">var</span> naturalNumbers = Stream.range(); <span class="pl-c">// naturalNumbers is now 1, 2, 3, ...</span>

<span class="pl-k">var</span> evenNumbers = naturalNumbers.map(<span class="hljs-function"><span class="pl-k">function</span> (<span class="hljs-params">x</span>) </span>{
  <span class="pl-k">return</span> <span class="hljs-number">2</span> * x; <span class="pl-c">// evenNumbers is now 2, 4, 6, ...</span>
});

<span class="pl-k">var</span> oddNumbers = naturalNumbers.filter(<span class="hljs-function"><span class="pl-k">function</span> (<span class="hljs-params">x</span>) </span>{
  <span class="pl-k">return</span> x % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>; <span class="pl-c">// oddNumbers is now 1, 3, 5, ...</span>
});

evenNumbers.take(<span class="hljs-number">3</span>).print(); <span class="pl-c">// =&gt; 2, 4, 6</span>
oddNumbers.take(<span class="hljs-number">3</span>).print(); <span class="pl-c">// =&gt; 1, 3, 5</span>
</code></pre>
<p>Cool, right? I kept my promise that streams are more powerful than arrays. Now, bear with me for a few more minutes and let&apos;s introduce a few more things about streams. You can make your own stream objects using <code>new Stream()</code> to create an empty stream, or <code>new Stream(head, functionReturningTail)</code> to create a non-empty stream. In case of a non-empty stream, the first parameter is the head of your desired stream, while the second parameter is a function returning the tail (a stream with all the rest of the elements), which could potentially be the empty stream. Confusing? Let&apos;s look at an example:</p>
<pre><code class="lang-js"><span class="pl-c">// the head of the s stream is 10; the tail of the s stream is the empty stream</span>
<span class="pl-k">var</span> s = <span class="pl-k">new</span> Stream(<span class="hljs-number">10</span>, <span class="hljs-function"><span class="pl-k">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="pl-k">return</span> <span class="pl-k">new</span> Stream();
});
s.print(); <span class="pl-c">// =&gt; 10</span>

<span class="pl-c">// the head of the t stream is 10; its tail has a head which is 20 and a tail which</span>
<span class="pl-c">// has a head which is 30 and a tail which is the empty stream.</span>
<span class="pl-k">var</span> t = <span class="pl-k">new</span> Stream(<span class="hljs-number">10</span>, <span class="hljs-function"><span class="pl-k">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="pl-k">return</span> <span class="pl-k">new</span> Stream(<span class="hljs-number">20</span>, <span class="hljs-function"><span class="pl-k">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="pl-k">return</span> <span class="pl-k">new</span> Stream(<span class="hljs-number">30</span>, <span class="hljs-function"><span class="pl-k">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="pl-k">return</span> <span class="pl-k">new</span> Stream();
    });
  });
});
t.print(); <span class="pl-c">// =&gt; 10, 20, 30</span>
</code></pre>
<p>Too much trouble for nothing? You can always use <code>Stream.make(10, 20, 30)</code> to do this. But notice that this way we can construct our own infinite streams easily. Let&apos;s make a stream which is an endless series of ones:</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="pl-k">function</span> <span class="pl-ent">ones</span>(<span class="hljs-params"></span>) </span>{
  <span class="pl-c">// the first element of the stream of ones is 1</span>
  <span class="pl-c">// the rest of the elements of this stream are given by calling the function ones() (this same function!)</span>
  <span class="pl-k">return</span> <span class="pl-k">new</span> Stream(<span class="hljs-number">1</span>, ones);
}

<span class="pl-k">var</span> s = ones();    <span class="pl-c">// now s contains 1, 1, 1, 1, ...</span>
s.take(<span class="hljs-number">3</span>).print(); <span class="pl-c">// =&gt; 1, 1, 1</span>
</code></pre>
<p>Notice that if you use <code>s.print()</code> on an infinite stream, it will print for ever, eventually running out of memory. Hence it&apos;s best to <code>s.take( n )</code> before you <code>s.print()</code>. Using <code>s.length()</code> on infinite streams is meaningless, so don&apos;t do it; it will cause an infinite loop (trying to find the end of an endless stream). But of course you can use <code>s.map(f)</code> and <code>s.filter(f)</code> on infinite streams. However, <code>s.walk(f)</code> will also not run properly on infinite streams. So those are some things to keep in mind; make sure you use <code>s.take(n)</code> if you want to take a finite part of an infinite stream.</p>
<p>Let&apos;s see if we can make something more interesting. Here&apos;s an alternative and interesting way to create the stream of natural numbers:</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="pl-k">function</span> <span class="pl-ent">ones</span>(<span class="hljs-params"></span>) </span>{
  <span class="pl-k">return</span> <span class="pl-k">new</span> Stream(<span class="hljs-number">1</span>, ones);
}

<span class="hljs-function"><span class="pl-k">function</span> <span class="pl-ent">naturalNumbers</span>(<span class="hljs-params"></span>) </span>{
  <span class="pl-c">// the natural numbers are the stream whose first element is 1...</span>
  <span class="pl-c">// and the rest are the natural numbers all incremented by one</span>
  <span class="pl-c">// which is obtained by adding the stream of natural numbers...</span>
  <span class="pl-c">// 1, 2, 3, 4, 5, ...</span>
  <span class="pl-c">// to the infinite stream of ones...</span>
  <span class="pl-c">// 1, 1, 1, 1, 1, ...</span>
  <span class="pl-c">// yielding...</span>
  <span class="pl-c">// 2, 3, 4, 5, 6, ...</span>
  <span class="pl-c">// which indeed are the REST of the natural numbers after one</span>
  <span class="pl-k">return</span> <span class="pl-k">new</span> Stream(<span class="hljs-number">1</span>, <span class="hljs-function"><span class="pl-k">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="pl-k">return</span> ones().add(naturalNumbers());
  });
}
naturalNumbers().take(<span class="hljs-number">5</span>).print(); <span class="pl-c">// =&gt; 1, 2, 3, 4, 5</span>
</code></pre>
<p>The careful reader will now observe the reason why the second parameter to <code>new Stream</code> is a function that returns the tail and not the tail itself. This way we can avoid infinite loops by postponing when the tail is evaluated.</p>
<p>Let&apos;s now turn to a little harder example. It&apos;s left as an exercise for the reader to figure out what the following piece of code does.</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="pl-k">function</span> <span class="pl-ent">sieve</span>(<span class="hljs-params">s</span>) </span>{
  <span class="pl-k">var</span> h = s.head();
  <span class="pl-k">return</span> <span class="pl-k">new</span> Stream(h, <span class="hljs-function"><span class="pl-k">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="pl-k">return</span> sieve(s.tail().filter(<span class="hljs-function"><span class="pl-k">function</span>(<span class="hljs-params">x</span>) </span>{
        <span class="pl-k">return</span> x % h != <span class="hljs-number">0</span>;
    }));
  });
}

sieve(Stream.range(<span class="hljs-number">2</span>)).take(<span class="hljs-number">10</span>).print();
</code></pre>
<p>Make sure you take some time to figure out what this does. Most programmers find it hard to understand unless they have a functional programming background, so don&apos;t feel bad if you don&apos;t get it immediately.</p>
<p><em>Here&apos;s a hint</em>: Try to find what the head of the printed stream will be. And then try to find what the second element of the stream will be (the head of the tail); then the third element, and so forth. The name of the function may also help you.</p>
<p>If you really can&apos;t figure out what it does, just run it and see for yourself! It&apos;ll be easier to figure out <em>how it does</em> it then.</p>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="../getting_started/More_Goodies.html"><span class="title">More Goodies</span></a></div>
          <div class="right"><a href="../API/Constructor.html"><span class="label">Next: </span><span class="title">Constructor</span></a></div>
        </div>
      </div>
    </div>
  </body>
</html>